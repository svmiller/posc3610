---
output: 
  stevetemplates::beamer:
    latex_engine: xelatex # use xelatex here instead! I recommend it, but this is minimal reprex
    dev: cairo_pdf # I typically comment this out  if latex_engine: pdflatex
    slide_level: 3 # I prefer this, but I won't force it on you.
title: "Do Arms Races Lead to War?"
subtitle: POSC 3610  -- International Conflict
author: Steven V. Miller
institute: Department of Political Science
titlegraphic: "`r paste0(Sys.getenv('HOME'), '/Dropbox/clemson/watermarks/clemson-university-wordmark-orange-purple.png')`"
make149: true
mainfont: "Open Sans"
titlefont: "Titillium Web"
header-includes:
- \usepackage{dcolumn}
- \usepackage{booktabs}
- \usepackage{longtable}
- \usepackage{array}
- \usepackage{multirow}
- \usepackage{wrapfig}
- \usepackage{float}
- \usepackage{colortbl}
- \usepackage{pdflscape}
- \usepackage{tabu}
- \usepackage{threeparttable}
---



```{r setup, include=FALSE, cache=F, message=F, warning=F, results="hide"}
knitr::opts_chunk$set(cache=TRUE, warning=F, message=F, echo=FALSE)
knitr::opts_chunk$set(fig.path='figs/')
knitr::opts_chunk$set(cache.path='cache/')

knitr::opts_chunk$set(
                  fig.process = function(x) {
                      x2 = sub('-\\d+([.][a-z]+)$', '\\1', x)
                      if (file.rename(x, x2)) x2 else x
                      }
                  )
```


```{r loadstuff, include=FALSE}
knitr::opts_chunk$set(cache=TRUE)
options(knitr.kable.NA = '')
library(tidyverse)
library(stevemisc)
library(peacesciencer)
library(fixest)
library(kableExtra)
library(modelsummary)
library(patchwork)
library(cowplot)


options("modelsummary_format_numeric_latex" = "plain")
```

```{r loaddata, cache=T, eval=T, echo=F, message=F, error=F, warning=F}

Mods <- readRDS("Mods.rds")
Sims <- readRDS("Sims.rds")
Data <- readRDS("Data.rds")

```

# Introduction
### Goal for Today

*Discuss whether arms races lead to war or not.*

### MIC of the Day: Second Yemenite War (MIC#2357)

```{r mic-of-the-day, eval=TRUE, echo=FALSE, out.width="100%"}

p1 <- ggdraw() + draw_image("ahmad-al-ghashmi.png", scale = 0.6)
p2 <- ggdraw() + draw_image("salim-rubai.jpg", scale = .6)
#p3 <- ggdraw() + draw_image("img/crush-india-march.png", scale = 0.9)
# p4 <- ggdraw() + draw_image("img/anti-china-protest-2011.jpg", scale = 0.9)

plot_grid(p1, p2)
# nitr::include_graphics("friedrich-franz-crop.jpg")
```



###

```{r, echo=F, fig.width=14, fig.height=8.5}

cow_ddy %>% 
  filter(ccode1 == 678 & ccode2 == 680) %>% 
  add_nmc() %>% select(ccode1:milper1, milex2, milper2) %>% 
  mutate(perc_milex1 = (milex1 - lag(milex1, 1))/lag(milex1, 1),
         perc_milex2 = (milex2 - lag(milex2, 1))/lag(milex2, 1),
         perc_milper1 = (milper1 - lag(milper1, 1))/lag(milper1, 1),
         perc_milper2 = (milper2 - lag(milper2, 1))/lag(milper2, 1)) %>%
  data.frame %>%
  filter(between(year, 1970, 1980)) %>% 
  select(ccode1:year, perc_milex1:perc_milex2) %>%
  gather(var, val, -ccode1, -ccode2, -year) %>%
  mutate(state = ifelse(var == "perc_milex1", "Yemen Arab Republic", "Yemen People's Republic"),
          lbl = paste0(mround(val),"%"),
         lbl = ifelse(year == 1900, NA, lbl)) %>%
  ggplot(.,aes(as.factor(year), val, fill=state)) + 
  theme_steve_web() +
  geom_bar(stat = "identity", color="black", position = "dodge") +
   scale_y_continuous(labels = scales::percent) +
  geom_text(
    aes(label = lbl),
    size = 3.5,
    vjust = -1.5, 
    position = position_dodge(.9)
  ) +
  labs(x = "", y = "Percentage Change in Military Expenditures from Previous Year",
       fill = "",
       title = "The Yemeni Arms Race Visualized, 1970-1980",
       subtitle = "Gibler et al. (2005) record an arms race here from 1971 to 1979 based on changes in military expenditures between the two states.",
       caption = "Data: Correlates of War National Material Capabilities (v. 6.0)")
```

# Arms Races and War
### Arms Races and War


We want to know the association between arms races and war.

- Similar to our interest in alliances.

We have two general predictions of the relationship.

1. Preparedness model
2. Escalation/spiral model

The arguments/intuition for both can be ported from our discussion about alliances.

## The Debate About Wallace
### Wallace's (1979, 1982) Design

Wallace proposes a rudimentary competitive hypothesis test.

- Unit of analysis: great power disputes (1814-1965)
- DV: war or no war
- IVs: 
    - arms race/no arms race
    - status quo/revisionist consideration

*Editorial note*: a lot of what's happening here is a leap of faith.

- Wallace describes, but never makes available, his coding of arms races.
 
### Wallace's (1979, 1982) Competitive Hypothesis Test
 
The preparedness model is vindicated if:

- the SQ state is comparably strong/stronger
- An observed arms races does not lead to war.

The spiral model is vindicated if:

- There is no effect of SQ/revisionism on escalation
- The arms race leads to war.

### 

```{r}
x <- matrix(c(9, 17, 19, 54), byrow = TRUE, 2, 2)
chisq_test1 <- broom::tidy(chisq.test(x))
chisq1 <- chisq_test1[1,1] %>% pull() %>% as.vector() %>% round(., 3)
pval1 <- chisq_test1[1,2] %>% pull() %>% as.vector() %>% round(., 3)
phi1 <- psych::phi(x)

x %>% as_tibble() %>%
  mutate(dv = c("War", "No War")) %>%
  select(dv, everything()) %>%
  kbl(.,
      longtable = T, booktabs = TRUE, linesep='',
      caption = "A Reproduction of Wallace's (1982) Table 1",
      col.names  = c("", "Revisionist Superiority", "No Revisionist Superiority"),
      align = "lcc") %>%
  row_spec(0, bold=TRUE) %>%
  column_spec(1, italic = TRUE) %>%
  footnote(general = paste0("chi sq. = ", chisq1, ". p-value: ", pval1, ". Phi: ", phi1))
```



### Wallace's Results, in Brief

Table 1:

- There were 28 disputes where the revisionist was absolutely superior. 9 escalated to war (32%).
- There were 125 disputes where the revisionist wasn't superior. 54 escalated to war (43%).
- If there were no differences between groups, the probability of us observing those differences is ~.561.

###



```{r}
x <- matrix(c(23, 3, 5, 68), byrow = TRUE, 2, 2)
chisq_test2 <- broom::tidy(chisq.test(x))
chisq2 <- chisq_test2[1,1] %>% pull() %>% as.vector() %>% round(., 3)
pval2 <- chisq_test2[1,2] %>% pull() %>% as.vector() %>% round(., 3)
phi2 <- psych::phi(x)

x %>% as_tibble() %>%
  mutate(dv = c("War", "No War")) %>%
  select(dv, everything()) %>%
  kbl(.,
      longtable = T, booktabs = TRUE, linesep='',
      caption = "A Reproduction of Wallace's (1982) Table 4",
      col.names  = c("", "Arms Race", "No Arms Race"),
      align = "lcc") %>%
  row_spec(0, bold=TRUE) %>%
  column_spec(1, italic = TRUE) %>%
  footnote(general = paste0("chi sq. = ", chisq2, ". p-value: ", pval2, ". Phi: ", phi2))
```

### Wallace's Results, in Brief

Table 2 (i.e. his Table 4):

- There were 28 disputes with arms races preceding them. 23 escalated to war (82%).
- There were 71 disputes without arms races preceding them. 3 escalated to war (4%).
- If there were no differences between groups, the probability of us observing that is basically 0.

Wallace: the preparedness model fails to explain the facts on both accounts.

### Diehl's (1983) Objections

Diehl raises several limitations in Wallace’s original study.

1. Wallace disaggregates every WWI and WWII dispute.
    - Both are over a quarter of his data set.
2. Wallace includes disputes not independent of ongoing wars.
    - e.g. USSR-Japan, 1945
    - WWI and WWII account for 80% of his explanatory power.
3. Wallace’s polynomial arms race functions is not without problems.
    - A biased measure, it would inadvertently pick up unilateral buildups.
    
Not helping matters: Wallace described but never released his data.

### 

```{r}
x <- matrix(c(3, 9, 10, 64), byrow = TRUE, 2, 2)
chisq_test3 <- broom::tidy(chisq.test(x,  simulate.p.value = TRUE))
chisq3 <- chisq_test3[1,1] %>% pull() %>% as.vector() %>% round(., 3)
pval3 <- chisq_test3[1,2] %>% pull() %>% as.vector() %>% round(., 3)
phi3 <- psych::phi(x)

x %>% as_tibble() %>%
  mutate(dv = c("War", "No War")) %>%
  select(dv, everything()) %>%
  kbl(.,
      longtable = T, booktabs = TRUE, linesep='',
      caption = "A Reproduction of Diehl's (1983) Table 2",
      col.names  = c("", "MMB", "No MMB"),
      align = "lcc") %>%
  row_spec(0, bold=TRUE) %>%
  column_spec(1, italic = TRUE) %>%
  footnote(general = paste0("chi sq. = ", chisq3, ". p-value: ", pval3, ". Phi: ", phi3))
```

### Do Arms Races Lead to War?

This debate was an open-ended question through the 1980s.

- Inferences very sensitive to design decisions
- Samples and arms race estimates varied from study to study, complicating matters.

Sample (1997) is a sort of Solomon to this debate.

- Arms races lead to war, but Wallace's results are unreasonably stark.

## Re-assessing the Arms Race-War Connection
### What Can We Do Here?

Let's put our own spin on this.

- *Unit of analysis*: non-directed dyad-years
- *DVs*: confrontation onset, confrontation fatalities (min., max.), escalation to dyadic war.
- *Main IV*: arms race (Gibler et al., 2005), MMB (my recreation of Gibler et al., 2005)
    - Total *n* of interest: 71 arms races and 116 MMBs
- *Controls*: rivalry, joint democracy, major power status, contiguity, CINC (W/S), min. GDP per capita, joint alliance
- *Methods/notes*: adjustments for temporal dependence, sample selection.



###


```{r reg-table-1, echo=F, eval=T, fig.width = 14, fig.height = 8.5, warning = F, message = F, results="asis"}

modelsummary(list("MMB (1816-2010)" = Mods[[1]], "Arms Race (1816-1992)" = Mods[[2]]),
             # output="latex",  
             longtable=TRUE,
             title = "A Dangerous Dyad-ish Analysis of Inter-state Conflict Onset",
             gof_omit = "IC|F|Log.|R2$|R2",
             coef_map = c("mmb" = "Arms Race/MMB",
                          "arms_race" = "Arms Race/MMB",
                          "ongoingrivalry" = "Ongoing Rivalry",
                          "landcontig" = "Land Contiguity",
                          "othercontig" = "Other Contiguity",
                          "ndircincprop" = "CINC Proportion",
                          "bothmaj" = "Both Major Powers",
                          "onlyonemaj" = "Major-Minor",
                          "cow_alliance" = "Alliance",
                          "atop_alliance" = "Alliance",
                          "cow_defense" = "Defense Pact",
                          "jointdem" = "Joint Democracy",
                          "minwbgdppc" = "Min. GDP per Capita in Dyad"),
             stars = TRUE) %>%
  row_spec(0, bold=TRUE) %>%
  kable_styling(font_size = 7) %>%
  row_spec(c(2), hline_after = TRUE) %>%
  row_spec(c( 1, 2), background="#eeeeee") 

```

###


```{r reg-table-2, echo=F, eval=T, fig.width = 14, fig.height = 8.5, warning = F, message = F, results="asis"}

modelsummary(list("Min. Fat. (MMB, 1816-2010)" = Mods[[5]], 
                  "Max. Fat. (MMB, 1816-2010)" = Mods[[6]], 
                  "Min. Fat. (AR, 1816-1992)" = Mods[[8]],
                  "Max. Fat. (AR, 1816-1992)" = Mods[[9]]),
             # output="latex",  
             longtable=TRUE,
             title = "A Dangerous Dyad-ish Analysis of Inter-state Conflict Fatalities",
             gof_omit = "IC|F|Log.|R2$|R2",
             coef_map = c("mmb" = "Arms Race/MMB",
                          "arms_race" = "Arms Race/MMB",
                          "ongoingrivalry" = "Ongoing Rivalry",
                          "landcontig" = "Land Contiguity",
                          "othercontig" = "Other Contiguity",
                          "ndircincprop" = "CINC Proportion",
                          "bothmaj" = "Both Major Powers",
                          "onlyonemaj" = "Major-Minor",
                          "cow_alliance" = "Alliance",
                          "cow_defense" = "Defense Pact",
                          "atop_alliance" = "Alliance",
                          "jointdem" = "Joint Democracy",
                          "minwbgdppc" = "Min. GDP per Capita in Dyad"),
             stars = TRUE) %>%
  row_spec(0, bold=TRUE) %>%
  kable_styling(font_size = 5) %>%
  row_spec(c(2), hline_after = TRUE) %>%
  row_spec(c( 1, 2), background="#eeeeee") 

```


###


```{r reg-table-3, echo=F, eval=T, fig.width = 14, fig.height = 8.5, warning = F, message = F, results="asis"}

modelsummary(list("MMB (1816-2010)" = Mods[[7]], 
                  "Arms Race (1816-1992)" = Mods[[10]]),
             # output="latex",  
             longtable=TRUE,
             title = "A Dangerous Dyad-ish Analysis of Inter-state Conflict Escalation",
             gof_omit = "IC|F|Log.|R2$|R2",
             coef_map = c("mmb" = "Arms Race/MMB",
                          "arms_race" = "Arms Race/MMB",
                          "ongoingrivalry" = "Ongoing Rivalry",
                          "landcontig" = "Land Contiguity",
                          "othercontig" = "Other Contiguity",
                          "ndircincprop" = "CINC Proportion",
                          "bothmaj" = "Both Major Powers",
                          "onlyonemaj" = "Major-Minor",
                          "cow_defense" = "Defense Pact",
                          "cow_alliance" = "Alliance",
                          "atop_alliance" = "Alliance",
                          "jointdem" = "Joint Democracy",
                          "minwbgdppc" = "Min. GDP per Capita in Dyad"),
             stars = TRUE) %>%
  row_spec(0, bold=TRUE) %>%
  kable_styling(font_size = 7) %>%
  row_spec(c(2), hline_after = TRUE) %>%
  row_spec(c( 1, 2), background="#eeeeee") 

```


###

```{r, echo=F, fig.width=14, fig.height=8.5}
Sims[[1]] %>%
  mutate(mmb_ar = rep(c("(MMB|AR) Absent", "(MMB|AR) Present"), 1000)) %>%
  mutate(y = plogis(y)) %>%
  mutate(cat = "Mutual Military Buildup\n(1816-2010)") -> sims_mmbonset


Sims[[2]] %>%
  mutate(mmb_ar = rep(c("(MMB|AR) Absent", "(MMB|AR) Present"), 1000)) %>%
  mutate(y = plogis(y)) %>%
  mutate(cat = "Arms Races\n(1816-1992)") -> sims_aronset

bind_rows(sims_mmbonset, sims_aronset) %>%
  group_by(cat, mmb_ar) %>%
  summarize(mean = mean(y),
            lwr = quantile(y, .05),
            upr = quantile(y, .95)) %>%
  ggplot(.,aes(cat, mean, ymin=lwr, ymax=upr, color=mmb_ar, shape=mmb_ar)) +
  theme_steve_web() +
  coord_flip() +
  geom_pointrange(position = position_dodge(width = .3), size=1.1) +
  labs(x = "", y = "Simulated Probabilities (with 95% Intervals)",
       caption = "Estimates generated by simulation from the models shown earlier in this presentation.",
       shape = "", color = "",
       title = "The Effect of Mutual Military Buildups and Arms Races on Confrontation Onset",
       subtitle = "There is no discernible effect of mutual military buildups, but arms races increase confrontation onset by about 78%.")

```

###

```{r, echo=F, fig.width=14, fig.height=8.5}
Sims[[3]] %>%
  mutate(mmb_ar = rep(c("(MMB|AR) Absent", "(MMB|AR) Present"), 1000)) %>%
  mutate(y = pnorm(y)) %>%
  mutate(cat = "Mutual Military Buildup\n(1816-2010)") -> sims_mmbescalation


Sims[[4]] %>%
  mutate(mmb_ar = rep(c("(MMB|AR) Absent", "(MMB|AR) Present"), 1000)) %>%
  mutate(y = pnorm(y)) %>%
  mutate(cat = "Arms Races\n(1816-1992)") -> sims_arescalation

bind_rows(sims_mmbescalation, sims_arescalation) %>%
  group_by(cat, mmb_ar) %>%
  summarize(mean = mean(y),
            lwr = quantile(y, .1),
            upr = quantile(y, .9)) %>%
  ggplot(.,aes(cat, mean, ymin=lwr, ymax=upr, color=mmb_ar, shape=mmb_ar)) +
  theme_steve_web() +
  coord_flip() +
  geom_pointrange(position = position_dodge(width = .3), size=1.1) +
  labs(x = "", y = "Simulated Probabilities (with 95% Intervals)",
       caption = "Estimates generated by simulation from the models shown earlier in this presentation.",
       shape = "", color = "",
       title = "The Effect of Mutual Military Buildups and Arms Races on Confrontation Escalation",
       subtitle = "Arms races increase the likelihood of escalation to war by about 64%. Mutual military buildups: about 120%.")

```

### Substantive Takeaways

The connection between arms races/MMBs is pretty clear.

- Discernible effect for arms races (if not MMBs) at onset phase.
    - FWIW: the rivalry indicator accounts for the MMB coefficient at onset phase.
- Discernible effect for both on conflict severity.
- Arms races/MMBs are more likely to coincide with escalation to dyadic war.

# Conclusion
### Conclusion

What we know:

- Arms races raise probability of dispute escalation to war.
- Much greater (weaker) support for steps-to-war (neorealism/preparedness) model on arms race vis-a-vis alliances.

What we don't know:

- What causes the arms race itself.
- How military technology intersects with the "arms race."
- How arms races emerge outside of rivalry.
- How domestic considerations can be adequately disentangled from the arms race.